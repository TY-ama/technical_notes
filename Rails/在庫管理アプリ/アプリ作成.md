**==コンテナの中に入って作業する==**
**controller (アクション) ▷ view を繰り返す**


### Modelの作成

- アプリで扱うものとデータ項目を整理する
	- 一つの物にまつわるデータは一つのモデルで管理
		- 部品に関するデータである部品名と個数は一つのモデルで管理
	- 部品 (part)(モデル名)
		- 部品名 (partName)(項目名)：string
		- 個数 (quantity)(項目名)　   ：integer
		- 項目名の確認はdb/schema.rb
- モデル生成
	- rails generate model モデル名 項目名:データ型
- データベースへの登録
	- rails db:migrate


### Controllerの作成

- 一つのモデルに対し一つのコントローラ(ファイル)
- **コントローラ名はモデル名を複数形にしたもの
- コントローラ作成
	- rails generate controller コントローラ名
	- コントローラ名：parts

`class PartsController < ApplicationController
    `def new
        `@part = Part.new
    `end

    def create
        receivedata = params.require(:part).permit(:partName, :quantity)
        
        @part = Part.new

        @part.partName = receivedata[:partName]
        @part.quantity = receivedata[:quantity]

        @part.save

        # if追加する & notice追加
        redirect_to parts_path
    end

    def index
        @parts = Part.all
    end
`end

- `@part.save
	- saveメソッドがモデルにある(モデルに保存してと依頼)


### Viewの作成

`<%= form_with model:@part do |f|%>`
    `<%= f.label :partname,"部品名" %>`
    `<%= f.text_field :partname%>`

   `<%= f.label :quantity, "個数" %>`
   `<%= f.text_field :quantity %>`

   `<%= f.submit "登録" %>`
`<% end %>`

- `<%= form_with model:@task do |f|%>
	- @task というインスタンス変数をもとにフォームを作成
- `<%= f.label :partname,"部品名" %>
	- ラベル (入力欄の横の文字)を作成
- `<%= f.text_field :partname%>
	- partname属性の入力フィールド作成
- `<%= f.submit "登録" %>`
	- 決定ボタンの作成 ( 「登録」 と表示 )

##### リンクの埋め込み

- `<%= link_to "入庫", new_part_path, class: "btn btn-primary mb-3" %>
	- new_part_path = parts#newアクションへ行く
	- class以降はbootstrap


### ルーティングの登録

- ルーティング
	- URLによって呼び出すアクションを振り分ける

- `resources :parts`
	- **基本的にこれ
	- 自動でルート生成
	- index  (/parts) , create , new  (/parts/new)などが作られる

- `get "parts/new", to: "parts#new"`
	- 流れ
		- parts/newが開かれたとき
		- partsコントローラのnewアクションを実行
	- get = データを取得・表示
- `post "parts", to: "parts#create"`
	- 流れ
		- フォームの送信ボタンが押される
		- partsコントローラのcreateアクションを実行
	- post =  データをサーバに送信・保存

| 用語             | 意味             |
| -------------- | -------------- |
| `POST`         | データを送るリクエストの種類 |
| `/parts`       | データを送る先のURL    |
| `parts#create` | 送られたデータを処理する場所 |

`resources :parts do`
	 `collection do`
	      `post :stock_in`
	      `post :stock_out`
	`end`
`end`

- collection
	- すべてのデータに対してアクション
	- /action
	- 例. すべてのユーザーの一覧表示
- member
	- 一つのデータに対してアクション
	- /:id/action
	- 例. 特定のユーザーのプロフィール表示

### データベースの重複を避けて更新

- アプリの流れではなく「部品」というデータにまつわるメソッド
	- partsモデルに書くべき (parts.rb)

- メソッドをモデルに書く
	- ▷ コントローラでモデルのメソッドを呼び出して使うメソッド作成