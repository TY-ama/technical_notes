---
tags:
  - t-notes/docs
datetimeCreate: 2025-09-05 09:48
---
- 求人登録画面はregister/top
	- syusyoku@akitasyokuno
	- kyujin
- 登録してもらえない使われない
- **求人登録ページ**改善
- 登録できるところまでいったん
- 新しいのがデータベースに登録できるか
- offers:269レコード
### 仕様
- pulicの中に求人票の生データ
- 事業所名(項目名)を見つけたら一個右のデータを取る
- 加入保険　
	- 丸が付けられてるから読み取れない
	- 登録画面でチェックボックス
- 休日(夏季休暇など)
	- 細かくやらなくてもいいのでは？
	- 日数ぐらいでいい

- 入力する項目多いかも？
	- 絶対入力しないといけないところと任意のところ分けた方が？

### 思ったところ
- 休日、年間休日数ぐらいでいい？
- 送信ボタン小さい
- ＆右側か真ん中の方がいい？
- 閲覧の方が紫なら合わせた方が？
	- 背景色じゃなくて紫の囲みとか
- 確認画面に飛ばされると編集不可なのめんどくさい
- 求人情報入力画面に戻るボタン欲しい
- 一覧画面に戻るボタン小さい？
- フォーマットに対応してないやつ
	- 基本給とか大事なやつの項目名から取り出す
	- ヒットしなければ手入力

### やること
- データ抽出した後のデータからデータ読み取るプログラム(jsonファイル)
	- 今はviews/dbsampleのなかで出してる
	- あとdbsample_controller.rb
		- これらはDB
	- PDF → OCR → xlsxファイル → DB登録 → データ読み込み？
		- app/controllers/localsource/xl_extraction.rbでエクセルファイルをハッシュに変換
		- jsonならいらない？
	- experience_controllerで登録
- モデル変更
	- offerに項目名追加




```dataviewjs
// ===== 関連ノート (タグ基準) =====
dv.header(3, "関連ノート");

const currentFile = dv.current();

// 現在のファイルにタグが存在し、かつ空のタグではない場合のみ処理を実行
if (currentFile.file.tags && currentFile.file.tags.length > 0 && currentFile.file.tags[0] !== "") {
    // 表示するタグの最大数を3つに制限
    const maxLoop = Math.min(currentFile.file.tags.length, 3);

    for (let i = 0; i < maxLoop; i++) {
        const tag = currentFile.file.tags[i];
        
        // タグからページを検索 (自分自身は除外)
        const pages = dv.pages(tag)
            .where(p => p.file.path !== currentFile.file.path) 
            .sort(f => f.file.mtime.ts, "desc")
            .limit(15);
        
        // 関連ページが見つかった場合のみリスト表示
        if (pages.length > 0) {
            // タグ名を太字で表示
            dv.span(`**${tag}**`); 
            dv.list(pages.file.link);
        }
    }
} else {
    // タグがない場合はメッセージを表示
    dv.paragraph("（関連するタグが設定されていません）");
}


// ===== このノートからのリンク先とそのページの被リンク =====
const outgoingLinks = currentFile.file.outlinks;

if (outgoingLinks.length > 0) {
    dv.header(3, "このノートからのリンク先");
    
    // outlinksはファイルオブジェクトではないので、パスからページ情報を取得する
    const linkedPages = outgoingLinks
        .map(link => dv.page(link.path))
        .filter(page => page); // 存在しないページ(undefined)を除外

    for (let page of linkedPages) {
        // ページタイトルをサブヘッダーとして表示
        dv.header(4, page.file.link);
        
        // そのページの被リンク（どこからリンクされているか）を表示
        if (page.file.inlinks.length > 0) {
            dv.list(page.file.inlinks.sort());
        } else {
            dv.paragraph("（このページへのリンクはありません）");
        }
    }
}
```